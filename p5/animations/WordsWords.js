/**
 * WordWords is used to  
 */
class WordWords extends Animation{
	/**
	* WordWords is used to
	* @param json - a json object containing initial inputs
	*/
	constructor (json) {
		super(json);
		this.loadJSON(json);
	}

	/**
	* loads in information and updates the WordWords/
	* @param json - a json object containing more information about this WordWords
	*/
	loadJSON(json) {
		json = json === undefined ? {} : json;
	}
	//------------------------------------------------------------- Getters and Setters
	setUp() {
		if(DOM.wordSelection === undefined) {
			DOM.wordSelection = createInput('abc');
			DOM.wordSelection.position(300,400);
  			//DOM.wordSelection.input(function(e) {});
		}
		frontPanel.clear();
		leftBoot.clear();
		rightBoot.clear();
	}

	loop() {
		let bass = fft.getEnergy("bass");
		let mid = fft.getEnergy("mid");
		let high = fft.getEnergy("treble");
		let words = DOM.wordSelection.value();
		let letters = [];
		let totalWidth = 0;
		let offset = 0;
		while(words.length > 0) {
			let m = this.charaterMatrix(words[0]);
			totalWidth += m[0].length;
			letters.push(m);
			words = words.substring(1,words.length);
		}
		letters.reverse();
		frontPanel.clear();
		for(let li = letters.length-1; li >= 0; li--) {
			let letter = letters[li];
			for(let ly = 0; ly < letter.length; ly++) {
				let oddStart = 0;
				if((totalWidth - 34 + offset) % 2 == 1 ) {
					oddStart = 1;
				}
				for(let lx = 0; lx < letter[ly].length; lx++) {
					let sx = lx + totalWidth - 34 + offset - oddStart;
					let i = frontPanel.GridToIndex(sx,ly);
					frontPanel.setColor({
						r:Math.min(255 * letter[ly][lx],64*letter[ly][lx] + bass * letter[ly][lx]),
						g:Math.min(255 * letter[ly][lx],64*letter[ly][lx] + mid * letter[ly][lx]),
						b:Math.min(255 * letter[ly][lx],64*letter[ly][lx] + high * letter[ly][lx]),
					},i);
				}
			}
			offset += letter[0].length+2;
		}
		console.log(totalWidth)
		frame = (frame + 1) % (frontPanel.width*2 + totalWidth + 2*letters.length);
		//delay(100);
	}
	//------------------------------------------------------------- helpers

	charaterMatrix(character="*") {
		let m;
		if(character == "a" || character == "A") {
			m = [
			[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
			[1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1],
			[1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1],
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
			[1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1],
			[1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1]
			];
		} else if(character == "b" || character == "B") {
			m = [ 
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],
			[1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0],
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],
			[1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1],
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0]
			];
		} else if(character == "c" || character == "C") {
			m = [ 
			[0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1],
			[0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0]
			];
		} else if(character == "d" || character == "D") {
			m = [ 
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1],
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0]
			];
		} else if(character == "e" || character == "E") {
			m = [ 
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0],
			[1, 1, 1, 1, 0, 1, 0, 1, 0, 1],
			[1, 1, 1, 1, 1, 0, 1, 0, 1, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0],
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
			];
		} else if(character == "f" || character == "F") {
			m = [ 
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0],
			[1, 1, 1, 1, 0, 1, 0, 1, 0, 1],
			[1, 1, 1, 1, 1, 0, 1, 0, 1, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0]
			];
		} else if(character == "g" || character == "G") {
			m = [ 
			[0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1],
			[0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0]
			];
		} else if(character == "h" || character == "H") {
			m = [ 
			[1, 1, 1, 0, 0, 0, 0, 1, 1, 1],
			[1, 1, 1, 0, 0, 0, 0, 1, 1, 1],
			[1, 1, 1, 1, 0, 1, 0, 1, 1, 1],
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
			[1, 1, 1, 0, 0, 0, 0, 1, 1, 1],
			[1, 1, 1, 0, 0, 0, 0, 1, 1, 1]
			];
		} else if(character == "i" || character == "I") {
			m = [ 
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
			[0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0],
			[0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0],
			[0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0],
			[0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0],
			[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
			];
		} else if(character == "j" || character == "J") {
			m = [ 
			[0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1],
			[0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1],
			[0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1]
			];
		} else if(character == "k" || character == "K") {
			m = [ 
			[1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0],
			[1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0],
			[1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
			[1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0],
			[1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0]
			];
		} else if(character == "l" || character == "L") {
			m = [ 
			[0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0],
			[0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0],
			[0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0],
			[0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0],
			[0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0],
			[0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1]
			];
		} else if(character == "m" || character == "M") {
			m = [ 
			[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1]
			];
		} else if(character == "n" || character == "N") {
			m = [ 
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0],
			[1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0],
			[1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0],
			[1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0]
			];
		} else if(character == "o" || character == "O") {
			m = [ 
			[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0]
			];
		} else if(character == "p" || character == "P") {
			m = [ 
			[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1],
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
			];
		} else if(character == "q" || character == "Q") {
			m = [ 
			[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],
			[1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0],
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1]
			];
		} else if(character == "r" || character == "R") {
			m = [ 
			[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0],
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0],
			[1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0],
			[1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0]
			];
		} else if(character == "s" || character == "S") {
			m = [ 
			[0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
			[0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0],
			[0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0],
			[0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0]
			];
		} else if(character == "t" || character == "T") {
			m = [ 
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
			[0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0]
			];
		} else if(character == "u" || character == "U") {
			m = [ 
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1],
			[0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0]
			];
		} else if(character == "v" || character == "V") {
			m = [ 
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0],
			[0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0],
			[0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0]
			];
		} else if(character == "w" || character == "w") {
			m = [ 
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0],
			[0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0],
			[0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0]
			];
		} else if(character == "x" || character == "X") {
			m = [ 
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0],
			[0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
			[0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0],
			[0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0]
			];
		} else if(character == "y" || character == "Y") {
			m = [ 
			[1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],
			[0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0],
			[0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0]
			];
		} else if(character == "z" || character == "Z") {
			m = [ 
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
			[0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0],
			[0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0],
			[0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0],
			[0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0],
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
			];
		} else {
			m = [ 
			[0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0]
			];
		}

		return m;
	}
		
}